<!DOCTYPE html>
<html lang="en-US">
  <head>
    <title>Student Logs</title>
    <meta charset="UTF-8" />

    <!-- Bootstrap CSS from CDN without integrity check -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script>
      // Add window.onload to ensure all styles have been applied before checking
      window.onload = function () {
        console.log('Page loaded, checking for Bootstrap...');

        // Check if Bootstrap's font is applied by inspecting the body element
        var fontFamily = window
          .getComputedStyle(document.body)
          .getPropertyValue('font-family');

        console.log('Font family detected:', fontFamily);

        // Check if the Bootstrap CSS was loaded
        if (!fontFamily || fontFamily.indexOf('Helvetica') === -1) {
          console.warn('Bootstrap CDN failed, applying local fallback.');
          // If Bootstrap's font isn't detected, load the local CSS
          var localCss = document.createElement('link');
          localCss.rel = 'stylesheet';
          localCss.href = '../css/bootstrap.min.css'; // Ensure correct MIME type
          document.head.appendChild(localCss);

          console.log('Local Bootstrap CSS has been loaded.');
        } else {
          console.log('Bootstrap loaded successfully from CDN.');
        }
      };
    </script>

    <!-- jQuery from CDN with fallback to local copy -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script>
      window.jQuery ||
        document.write('<script src="../js/jquery-3.7.1.min.js"><\/script>');
      console.log('jQuery loaded successfully.');
    </script>
  </head>
  <body class="container py-5">
    <form class="form">
      <!-- Image Container with Bootstrap classes -->
      <div class="d-flex justify-content-center mb-4">
        <img
          src="https://www.cdnlogo.com/logos/u/35/utah-valley-university.svg"
          alt="Utah Valley University Logo"
          width="200"
          class="img-fluid"
        />
      </div>

      <!-- Mode Toggle with Bootstrap classes -->
      <div class="form-check form-switch d-flex justify-content-center mb-4">
        <input class="form-check-input" type="checkbox" id="modeToggle" />
        <label class="form-check-label ms-2" for="modeToggle" id="modeLabel">
          Dark Mode
        </label>
      </div>

      <!-- Select Course with Bootstrap classes -->
      <div class="mb-3">
        <label for="course" class="form-label">Select Course</label>
        <select
          class="form-select"
          id="course"
          name="course"
          data-cy="course_select"
        >
          <option selected value="">Choose Courses</option>
        </select>
      </div>

      <!-- UVU ID input, initially hidden, with Bootstrap classes -->
      <div id="uvuIdContainer" class="mb-3" style="display: none">
        <label for="uvuId" class="form-label">UVU ID</label>
        <input
          type="text"
          id="uvuId"
          name="uvuId"
          class="form-control"
          data-cy="uvuId_input"
          maxlength="8"
          placeholder="10234567"
        />
      </div>

      <!-- Student Logs title and logs, initially hidden -->
      <h3
        id="uvuIdDisplay"
        class="mt-4"
        data-cy="uvuIdDisplay"
        style="display: none"
      >
        Student Logs
      </h3>
      <ul data-cy="logs" class="list-group mt-3" style="display: none"></ul>

      <!-- New log input, initially hidden -->
      <div id="newLogContainer" class="mb-3" style="display: none">
        <label for="logTextarea" class="form-label">New Log</label>
        <textarea
          class="form-control"
          id="logTextarea"
          aria-label="add log textarea"
          data-cy="log_textarea"
          rows="3"
        ></textarea>
        <button
          type="submit"
          class="btn btn-primary mt-3"
          data-cy="add_log_btn"
          disabled
        >
          Add Log
        </button>
      </div>
    </form>

    <script src="script.js"></script>
    <!-- Bootstrap JS and Popper.js from CDN without integrity check -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      if (typeof bootstrap === 'undefined') {
        console.warn('Bootstrap JS CDN failed, applying local fallback.');
        document.write(
          '<script src="../js/bootstrap.bundle.min.js"><\/script>'
        );
      } else {
        console.log('Bootstrap JS loaded successfully from CDN.');
      }
    </script>
  </body>
</html>
